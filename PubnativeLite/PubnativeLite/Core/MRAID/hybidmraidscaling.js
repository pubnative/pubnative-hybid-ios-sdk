!function(){console.log("MRAID object loading...");var t=0,i=1,n=2,r=3,o=t,d={d:function(e){o<=t&&console.log("(D-mraid.js) "+e)},i:function(e){o<=i&&console.log("(I-mraid.js) "+e)},w:function(e){o<=n&&console.log("(W-mraid.js) "+e)},e:function(e){o<=r&&console.log("(E-mraid.js) "+e)}},f=window.mraid={},s=f.STATES={LOADING:"loading",DEFAULT:"default",EXPANDED:"expanded",RESIZED:"resized",HIDDEN:"hidden"},a=f.PLACEMENT_TYPES={INLINE:"inline",INTERSTITIAL:"interstitial"},e=f.RESIZE_PROPERTIES_CUSTOM_CLOSE_POSITION={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",CENTER:"center",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},l=f.ORIENTATION_PROPERTIES_FORCE_ORIENTATION={PORTRAIT:"portrait",LANDSCAPE:"landscape",NONE:"none"},u=f.EVENTS={ERROR:"error",READY:"ready",SIZECHANGE:"sizeChange",STATECHANGE:"stateChange",EXPOSURECHANGE:"exposureChange",AUDIOVOLUMECHANGE:"audioVolumeChange",VIEWABLECHANGE:"viewableChange"},c=(f.SUPPORTED_FEATURES={SMS:"sms",TEL:"tel",CALENDAR:"calendar",STOREPICTURE:"storePicture",INLINEVIDEO:"inlineVideo",VPAID:"vpaid",LOCATION:"location"},f.LOCATION_SOURCES={GPS:1,IP:2,USER_PROVIDED:3}),h=s.LOADING,E=a.INLINE,g={},p=!1,m=!1,C=!1,O={exposedPercentage:0,visibleRectangle:{x:0,y:0,width:0,height:0},occlusionRectangles:null},v=0,P={width:0,height:0,useCustomClose:!1,isModal:!0},w={allowOrientationChange:!0,forceOrientation:l.NONE},R={orientation:l.PORTRAIT,locked:!1},S={width:0,height:0,customClosePosition:e.TOP_RIGHT,offsetX:0,offsetY:0,allowOffscreen:!0},T={x:0,y:0,width:0,height:0},N={x:0,y:0,width:0,height:0},y={width:0,height:0},I={width:0,height:0},x={lat:-1,lon:-1,type:c.GPS,accuracy:-1,lastfix:-1,ipservice:"none"},A={};window.listeners=A;var L={version:"3.0",sdk:"HyBid",sdkVersion:null,appId:null,ifa:null,limitAdTracking:!1,coppa:!1};function D(e){var t=document.createElement("IFRAME");t.setAttribute("src","mraid://"+e),document.documentElement.appendChild(t),t.parentNode.removeChild(t),t=null}function z(e){var t=Array.prototype.slice.call(arguments);t.shift(),d.i("fireEvent "+e+" ["+t.toString()+"]");var i=(A[e]||[]).slice(0);if(i){d.i(i.length+" listener(s) found for "+e);for(var n=0;n<i.length;n++)d.i("firing listener "+n+" for "+e+": "+i[n]),i[n].apply(null,t)}else d.i("no listeners found")}function V(e,t){for(var i in t)if(t[i]===e)return 1}function U(e,t){var i,n=!0,r=b[t];for(i in e){var o=r[i],s=e[i];o&&!o(s)&&(f.fireErrorEvent("Value of property "+i+" ("+s+") is invalid","mraid."+t),n=!1)}return n}window.MRAID_ENV=L,f.addEventListener=function(e,t){if(d.i("mraid.addEventListener "+e+": "+String(t)),e&&t)if(V(e,u)){for(var i=A[e]=A[e]||[],n=0;n<i.length;n++){var r=String(t),o=String(i[n]);if(t===i[n]||r===o)return void d.i("listener "+r+" is already registered for event "+e)}i.push(t)}else f.fireErrorEvent("Unknown MRAID event: "+e,"addEventListener");else f.fireErrorEvent("Both event and listener are required.","addEventListener")},f.createCalendarEvent=function(e){d.i("mraid.createCalendarEvent with "+e),g[f.SUPPORTED_FEATURES.CALENDAR]?D("createCalendarEvent?eventJSON="+JSON.stringify(e)):d.e("createCalendarEvent is not supported")},f.close=function(){d.i("mraid.close"),h===s.LOADING||h===s.DEFAULT&&E===a.INLINE||h===s.HIDDEN||D("close")},f.expand=function(e){void 0===e?d.i("mraid.expand (1-part)"):d.i("mraid.expand "+e),E!==a.INLINE||h!==s.DEFAULT&&h!==s.RESIZED||D(void 0===e?"expand":"expand?url="+encodeURIComponent(e))},f.getCurrentPosition=function(){return d.i("mraid.getCurrentPosition"),T},f.getDefaultPosition=function(){return d.i("mraid.getDefaultPosition"),N},f.getExpandProperties=function(){return d.i("mraid.getExpandProperties"),P},f.getMaxSize=function(){return d.i("mraid.getMaxSize"),y},f.getOrientationProperties=function(){return d.i("mraid.getOrientationProperties"),w},f.getCurrentAppOrientation=function(){return d.i("mraid.getCurrentAppOrientation"),R},f.getPlacementType=function(){return d.i("mraid.getPlacementType"),E},f.getResizeProperties=function(){return d.i("mraid.getResizeProperties"),S},f.getScreenSize=function(){return d.i("mraid.getScreenSize"),I},f.getState=function(){return d.i("mraid.getState"),h},f.getVersion=function(){return d.i("mraid.getVersion"),"3.0"},f.getLocation=function(){return d.i("mraid.getLocation"),x},f.isViewable=function(){return d.i("mraid.isViewable"),p},f.open=function(e){d.i("mraid.open "+e),D("open?url="+encodeURIComponent(e))},f.playVideo=function(e){d.i("mraid.playVideo "+e),D("playVideo?url="+encodeURIComponent(e))},f.removeEventListener=function(e,t){if(d.i("mraid.removeEventListener "+e+" : "+String(t)),e)if(V(e,u))if(A.hasOwnProperty(e))if(t){for(var i=A[e],n=i.length,r=0;r<n;r++){var o=i[r],s=String(t),a=String(o);if(t===o||s===a){i.splice(r,1);break}}r===n&&d.i("listener "+s+" not found for event "+e),0===i.length&&delete A[e]}else delete A[e];else d.i("no listeners registered for event "+e);else f.fireErrorEvent("Unknown MRAID event: "+e,"removeEventListener");else f.fireErrorEvent("Event is required.","removeEventListener")},f.resize=function(){d.i("mraid.resize"),E!==a.INTERSTITIAL&&h!==s.LOADING&&h!==s.HIDDEN&&(h!==s.EXPANDED?C?D("resize"):f.fireErrorEvent("mraid.resize is not ready to be called","mraid.resize"):f.fireErrorEvent("mraid.resize called when ad is in expanded state","mraid.resize"))},f.setExpandProperties=function(e){if(d.i("mraid.setExpandProperties"),U(e,"setExpandProperties")){for(var t=P.useCustomClose,i=["width","height","useCustomClose"],n=0;n<i.length;n++){var r=i[n];e.hasOwnProperty(r)&&(P[r]=e[r])}P.useCustomClose!==t&&D("useCustomClose?useCustomClose="+P.useCustomClose),m=!0}else d.e("failed validation")},f.setOrientationProperties=function(e){if(d.i("mraid.setOrientationProperties"),U(e,"setOrientationProperties")){var t={};t.allowOrientationChange=w.allowOrientationChange,t.forceOrientation=w.forceOrientation;for(var i=["allowOrientationChange","forceOrientation"],n=0;n<i.length;n++){var r=i[n];e.hasOwnProperty(r)&&(t[r]=e[r])}t.allowOrientationChange&&t.forceOrientation!==f.ORIENTATION_PROPERTIES_FORCE_ORIENTATION.NONE?f.fireErrorEvent("allowOrientationChange is true but forceOrientation is "+t.forceOrientation,"setOrientationProperties"):(w.allowOrientationChange=t.allowOrientationChange,w.forceOrientation=t.forceOrientation,D("setOrientationProperties?"+("allowOrientationChange="+w.allowOrientationChange+"&forceOrientation="+w.forceOrientation)))}else d.e("failed validation")},f.setResizeProperties=function(e){d.i("mraid.setResizeProperties"),C=!1;for(var t=["width","height","offsetX","offsetY"],i=0;i<t.length;i++){var n=t[i];if(!e.hasOwnProperty(n))return void f.fireErrorEvent("required property "+n+" is missing","mraid.setResizeProperties")}if(U(e,"setResizeProperties")){var r={x:0,y:0};if((e.hasOwnProperty("allowOffscreen")?e:S).allowOffscreen){if(!function(e){d.d("isCloseRegionOnScreen"),d.d("defaultPosition "+N.x+" "+N.y),d.d("offset "+e.offsetX+" "+e.offsetY);var t={};t.x=N.x+e.offsetX,t.y=N.y+e.offsetY,t.width=e.width,t.height=e.height,G("resizeRect",t);var i=(e.hasOwnProperty("customClosePosition")?e:S).customClosePosition;d.d("customClosePosition "+i);e={width:50,height:50};-1!==i.search("left")?e.x=t.x:-1!==i.search("center")?e.x=t.x+t.width/2-25:-1!==i.search("right")&&(e.x=t.x+t.width-50);-1!==i.search("top")?e.y=t.y:"center"===i?e.y=t.y+t.height/2-25:-1!==i.search("bottom")&&(e.y=t.y+t.height-50);t={x:0,y:0};return t.width=y.width,t.height=y.height,_(t,e)}(e))return void f.fireErrorEvent("close event region will not appear entirely onscreen","mraid.setResizeProperties")}else{if(e.width>y.width||e.height>y.height)return void f.fireErrorEvent("resize width or height is greater than the maxSize width or height","mraid.setResizeProperties");r=function(e){d.d("fitResizeViewOnScreen"),d.d("defaultPosition "+N.x+" "+N.y),d.d("offset "+e.offsetX+" "+e.offsetY);var t={};t.x=N.x+e.offsetX,t.y=N.y+e.offsetY,t.width=e.width,t.height=e.height,G("resizeRect",t);var i={x:0,y:0};i.width=y.width,i.height=y.height;var n={x:0,y:0};if(_(i,t))return d.d("no adjustment necessary"),n;t.x<i.x?n.x=i.x-t.x:t.x+t.width>i.x+i.width&&(n.x=i.x+i.width-(t.x+t.width));d.d("adjustments.x "+n.x),t.y<i.y?n.y=i.y-t.y:t.y+t.height>i.y+i.height&&(n.y=i.y+i.height-(t.y+t.height));return d.d("adjustments.y "+n.y),t.x=N.x+e.offsetX+n.x,t.y=N.y+e.offsetY+n.y,G("adjusted resizeRect",t),n}(e)}for(var o=["width","height","offsetX","offsetY","customClosePosition","allowOffscreen"],i=0;i<o.length;i++){n=o[i];e.hasOwnProperty(n)&&(S[n]=e[n])}D("setResizeProperties?"+("width="+S.width+"&height="+S.height+"&offsetX="+(S.offsetX+r.x)+"&offsetY="+(S.offsetY+r.y)+"&customClosePosition="+S.customClosePosition+"&allowOffscreen="+S.allowOffscreen)),C=!0}else f.fireErrorEvent("failed validation","mraid.setResizeProperties")},f.storePicture=function(e){d.i("mraid.storePicture "+e),g[f.SUPPORTED_FEATURES.STOREPICTURE]?D("storePicture?url="+encodeURIComponent(e)):d.e("storePicture is not supported")},f.supports=function(e){d.i("mraid.supports "+e+" "+g[e]);e=g[e];return void 0===e&&(e=!1),e},f.useCustomClose=function(e){d.i("mraid.useCustomClose "+e),P.useCustomClose!==e&&(P.useCustomClose=e,D("useCustomClose?useCustomClose="+P.useCustomClose))},f.unload=function(){d.i("mraid.unload"),D("unload")},f.initVpaid=function(e){0},f.setCurrentPosition=function(e,t,i,n){d.i("mraid.setCurrentPosition "+e+","+t+","+i+","+n);var r={};r.width=T.width,r.height=T.height,d.i("previousSize "+r.width+","+r.height),T.x=e,T.y=t,T.width=i,T.height=n,i===r.width&&n===r.height||f.fireSizeChangeEvent(i,n)},f.setDefaultPosition=function(e,t,i,n){d.i("mraid.setDefaultPosition "+e+","+t+","+i+","+n),N.x=e,N.y=t,N.width=i,N.height=n},f.setExpandSize=function(e,t){d.i("mraid.setExpandSize "+e+"x"+t),P.width=e,P.height=t},f.setMaxSize=function(e,t){d.i("mraid.setMaxSize "+e+"x"+t),y.width=e,y.height=t},f.setPlacementType=function(e){d.i("mraid.setPlacementType "+e),E=e},f.setScreenSize=function(e,t){d.i("mraid.setScreenSize "+e+"x"+t),I.width=e,I.height=t,updateCreativeSize(e,t),m||(P.width=e,P.height=t)},f.setSupports=function(e,t){d.i("mraid.setSupports "+e+" "+t),g[e]=t},f.setSdkVersion=function(e){d.i("mraid.setSdkVersion "+e),e&&""!==e&&(L.sdkVersion=e)},f.setAppId=function(e){d.i("mraid.setAppId "+e),e&&""!==e&&(L.appId=e)},f.setIfa=function(e){d.i("mraid.setIfa "+e),e&&""!==e&&(L.sdkVersion=e)},f.setLimitAdTracking=function(e){d.i("mraid.setLimitAdTracking "+e),L.limitAdTracking=e},f.setCoppa=function(e){d.i("mraid.setCoppa "+e),L.coppa=e},f.setCurrentAppOrientation=function(e){d.i("mraid.setCurrentAppOrientation "+e),e&&(R=e)},f.setLocation=function(e){d.i("mraid.setLocation "+e),e&&(x=e)},f.fireErrorEvent=function(e,t){d.i("mraid.fireErrorEvent "+e+" "+t),z(f.EVENTS.ERROR,e,t)},f.fireReadyEvent=function(){d.i("mraid.fireReadyEvent"),z(f.EVENTS.READY)},f.fireSizeChangeEvent=function(e,t){d.i("mraid.fireSizeChangeEvent "+e+"x"+t),h!==f.STATES.LOADING&&z(f.EVENTS.SIZECHANGE,e,t)},f.fireStateChangeEvent=function(e){d.i("mraid.fireStateChangeEvent "+e),h!==e&&(h=e,z(f.EVENTS.STATECHANGE,h))},f.fireExposureChangeEvent=function(e,t,i){if(d.i("mraid.fireExposureChangeEvent "+e+" "+t+" "+i),h!==f.STATES.LOADING){if(O.exposedPercentage=e,O.visibleRectangle=t,i)if(O.occlusionRectangles)for(var n=0;n<i.length;n++)O.occlusionRectangles.push(i[n]);else O.occlusionRectangles=i;else O.occlusionRectangles=null;z(f.EVENTS.EXPOSURECHANGE,e,t,i),p=0<e,z(f.EVENTS.VIEWABLECHANGE,p)}},f.fireAudioVolumeChangeEvent=function(e){d.i("mraid.fireAudioVolumeChangeEvent "+e),v!==e&&(v=e,z(f.EVENTS.AUDIOVOLUMECHANGE,v))},f.fireViewableChangeEvent=function(e){d.i("mraid.fireViewableChangeEvent "+e),p!==e&&(p=e,z(f.EVENTS.VIEWABLECHANGE,p))};var b={setExpandProperties:{width:function(e){return!isNaN(e)},height:function(e){return!isNaN(e)},useCustomClose:function(e){return"boolean"==typeof e}},setOrientationProperties:{allowOrientationChange:function(e){return"boolean"==typeof e},forceOrientation:function(e){return"string"==typeof e&&-1!==["portrait","landscape","none"].indexOf(e)}},setResizeProperties:{width:function(e){return!isNaN(e)&&50<=e},height:function(e){return!isNaN(e)&&50<=e},offsetX:function(e){return!isNaN(e)},offsetY:function(e){return!isNaN(e)},customClosePosition:function(e){return"string"==typeof e&&-1!==["top-left","top-center","top-right","center","bottom-left","bottom-center","bottom-right"].indexOf(e)},allowOffscreen:function(e){return"boolean"==typeof e}}};function _(e,t){return d.d("isRectContained"),G("containingRect",e),G("containedRect",t),t.x>=e.x&&t.x+t.width<=e.x+e.width&&t.y>=e.y&&t.y+t.height<=e.y+e.height}function G(e,t){d.d(e+" ["+t.x+","+t.y+"],["+(t.x+t.width)+","+(t.y+t.height)+"] ("+t.width+"x"+t.height+")")}f.dumpListeners=function(){var e,t=Object.keys(A).length;for(e in d.i("dumping listeners ("+t+" events)"),A){var i=A[e];d.i("  "+e+" contains "+i.length+" listeners");for(var n=0;n<i.length;n++)d.i("    "+i[n])}},console.log("MRAID object loaded")}();
